function LocalDataStorage(e){function n(e,t,a,l){var u=a[l];return"ASC"===u.direction.toUpperCase()&&e[u.name]<t[u.name]||"DESC"===u.direction.toUpperCase()&&e[u.name]>t[u.name]?-1:"ASC"===u.direction.toUpperCase()&&e[u.name]>t[u.name]||"DESC"===u.direction.toUpperCase()&&e[u.name]<t[u.name]?1:l+1<a.length?n(e,t,a,l+1):0}function t(e,n){if(void 0===n||null===n||"function"!=typeof n)return!0;var t=n.call(e);return t}function a(e,n){for(var t={},a=0;a<n.length;a++){var l=n[a];"function"!==l.type&&(t[l.name]=e[l.name])}return t}var l="",u=[],o=[],r=!1;this.getId=function(){return l},this.getStructure=function(){return u},this.isDebug=function(){return r},this.getRawRows=function(){return o},this.setDebug=function(e){r=e},this.addColumn=function(e){if(r&&console.info("LocalDataStorage.addColumn()"),void 0===e.name||null===e.name)return console.error("Column name can not be null"),null;if("LDS_"===e.name.substring(0,4))return console.error('Columnprefix "LDS_" is reserved for internal functions'),null;for(var n=0;n<u.length;n++){var t=u[n];if(t.name===e.name)return console.error('Column "'+e.name+'" already exists'),null}return void 0===e.type&&(e.type="string"),"string"!==e.type&&"number"!==e.type&&"boolean"!==e.type?(console.error('Column "'+e.name+'" does not support datatype "'+e.type+'"'),null):(void 0!==e.defaultvalue&&null!==e.defaultvalue?"string"===e.type?e.defaultvalue=this.validateValueString(e.defaultvalue):"number"===e.type?e.defaultvalue=this.validateValueNumber(e.defaultvalue):"boolean"===e.type&&(e.defaultvalue=this.validateValueBoolean(e.defaultvalue)):e.defaultvalue=null,void 0!==e.nullable&&null!==e.nullable?e.nullable!==!0&&e.nullable!==!1&&(e.nullable=!0):e.nullable=!0,u.push({name:e.name,type:e.type,defaultvalue:e.defaultvalue,nullable:e.nullable}),r&&console.info('Column "'+e.name+'" with type "'+e.type+'" added successfully'),!0)},this.addRow=function(n){r&&console.info("LocalDataStorage.addRow()");var t={};if(t.LDS_ROWGUID=this.createRowGuid(),t.LDS_ROWVERSION=this.getCurrentRowVersion(),void 0!==n&&null!==n)for(var a=0;a<u.length;a++){var l=u[a];void 0!==n[l.name]?"string"===l.type?t[l.name]=this.validateValueString(n[l.name]):"number"===l.type?t[l.name]=this.validateValueNumber(n[l.name]):"boolean"===l.type&&(t[l.name]=this.validateValueBoolean(n[l.name])):l.nullable===!1&&null===e.defaultvalue?console.error('Column "'+l.name+'" can not be null'):t[l.name]=e.defaultvalue}return r&&console.info(t),o.push(t),t},this.select=function(e,n,t){return this.selectRow(e,n,t)},this.selectRow=function(e,l,r){var i=0,s=[],d=[];(void 0===r||null===r)&&(r=0);for(var f=0;f<o.length;f++){var c=o[f];t(c,e)&&(0===r||r>i)&&(d.push(c),r>0&&i++)}l=[{name:"name",direction:"ASC"},{name:"visible",direction:"ASC"}],d.sort(function(e,t){return n(e,t,l,0)});for(var f=0;f<d.length;f++)s.push(a(d[f],u));return s},this.update=function(){return this.updateRow()},this.updateRow=function(){},this.deleteRow=function(){},this.validateValueString=function(e){return String(e)},this.validateValueNumber=function(e){var n=parseInt(e);return isNaN(n)&&(n=0),n},this.validateValueBoolean=function(e){return"string"==typeof e?e="true"===e.toLowerCase()?!0:"false"===e.toLowerCase()?!1:null:"number"==typeof e?e=1===e?!0:0===e?!1:null:"object"==typeof e&&(e=null),e},this.getCurrentRowVersion=function(){return 0},this.createRowGuid=function i(){function e(e){var n=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+n.substr(0,4)+"-"+n.substr(4,4):n}return e()+e(!0)+e(!0)+e()},this.initiate=function(e){void 0!==e&&null!==e&&(void 0!==e.id&&null!==e.id&&(l=e.id),void 0!==e.debug&&null!==e.debug&&(r=e.debug)),r&&console.info("LocalDataStorage.initiate()")},this.initiate(e)}
//# sourceMappingURL=./datastorage.min.map